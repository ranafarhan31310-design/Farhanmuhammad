<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bouncing Ball â€” Animated & Power-Ups</title>
  <style>
    :root{--bg:#071028;--card:#071830;--accent:#38bdf8;--muted:#9fb7c9;--good:#34d399}
    *{box-sizing:border-box}
    body{margin:24px;background:#051229;font-family:Inter,Arial;color:#e6eef8;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .container{width:940px;max-width:96%;}
    .scorebar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;margin-bottom:12px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .score-left{display:flex;gap:18px;align-items:center}
    .score-item{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;font-weight:700;display:flex;flex-direction:column;align-items:flex-start}
    .label{font-size:12px;color:var(--muted);font-weight:600}
    .value{font-size:18px;color:var(--accent)}
    .controls{display:flex;gap:8px}
    button.btn{background:var(--accent);border:none;color:#002233;padding:8px 12px;border-radius:10px;font-weight:800;cursor:pointer}
    button.btn:hover{filter:brightness(.95)}

    .stage{position:relative;background:linear-gradient(180deg,#061428,#07183a);padding:14px;border-radius:12px;box-shadow:inset 0 0 60px rgba(0,0,0,0.5)}
    canvas#game{display:block;width:100%;height:auto;border-radius:8px;}

    /* Overlays */
    .overlay{position:absolute;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .overlay .card{pointer-events:auto;background:rgba(5,8,15,0.9);padding:18px;border-radius:12px;text-align:center;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .overlay h2{margin:6px 0;color:var(--good)}

    /* Confetti & power-ups */
    #confettiLayer{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;overflow:hidden}
    .confetti, .gift{position:absolute;width:10px;height:16px;border-radius:2px;opacity:0.95}

    @media (max-width:700px){.container{width:96%}}
  </style>
</head>
<body>
  <div class="container">
    <div class="scorebar">
      <div class="score-left">
        <div class="score-item"><div class="label">SCORE</div><div id="scoreVal" class="value">0</div></div>
        <div class="score-item"><div class="label">LIVES</div><div id="livesVal" class="value">5</div></div>
        <div class="score-item"><div class="label">LEVEL</div><div id="levelVal" class="value">1</div></div>
      </div>
      <div class="controls">
        <button id="pauseBtn" class="btn">Pause</button>
        <button id="restartBtn" class="btn">Restart</button>
      </div>
    </div>

    <div class="stage">
      <canvas id="game" width="880" height="520"></canvas>
      <div id="confettiLayer"></div>
      <div id="levelOverlay" class="overlay" style="display:none">
        <div class="card"><h2 id="levelText">Level Complete!</h2><div style="margin-top:6px">Preparing next level...</div></div>
      </div>
    </div>
  </div>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const confettiLayer = document.getElementById('confettiLayer');
const scoreVal = document.getElementById('scoreVal');
const livesVal = document.getElementById('livesVal');
const levelVal = document.getElementById('levelVal');
const levelOverlay = document.getElementById('levelOverlay');
const levelText = document.getElementById('levelText');
const pauseBtn = document.getElementById('pauseBtn');
const restartBtn = document.getElementById('restartBtn');

let W = canvas.width, H = canvas.height;
let score = 0, lives = 5, level = 1;
let paused = false, leveling = false;

const paddle = {w:120,h:14,x:(W-120)/2,y:H-46,speed:10};
const ball = {r:9,x:W/2,y:H-80,vx:4,vy:-4};
let brickRows = 2, brickCols = 6;
let brickPadding = 12, brickOffsetTop = 48, brickOffsetLeft = 36;
let brickW = (W - brickOffsetLeft*2 - (brickCols-1)*brickPadding)/brickCols;
let brickH = 20; let bricks = [];
let gifts = [];

function initBricks(){
  bricks=[];
  brickW = (W - brickOffsetLeft*2 - (brickCols-1)*brickPadding)/brickCols;
  for(let r=0;r<brickRows;r++){ bricks[r]=[]; for(let c=0;c<brickCols;c++){
    const x = brickOffsetLeft + c*(brickW+brickPadding); const y = brickOffsetTop + r*(brickH+brickPadding);
    bricks[r][c] = {x,y,alive:true,color:(r%2? '#60a5fa':'#34d399')};
  }}
}

function spawnGift(x,y){
  const types=['life','ice','fire'];
  if(Math.random()<0.3){
    const type = types[Math.floor(Math.random()*types.length)];
    gifts.push({x,y,type,size:14,vy:2});
  }
}

function draw(){
  // animated background
  const t = Date.now()/500;
  const grad = ctx.createLinearGradient(0,0,W,H);
  grad.addColorStop(0, `hsl(${(t*40)%360},30%,10%)`);
  grad.addColorStop(1, `hsl(${(t*50)%360},50%,15%)`);
  ctx.fillStyle = grad; ctx.fillRect(0,0,W,H);

  // bricks
  for(let r=0;r<brickRows;r++){ for(let c=0;c<brickCols;c++){ const b=bricks[r][c]; if(b && b.alive){ ctx.fillStyle=b.color; ctx.fillRect(b.x,b.y,brickW,brickH); }} }
  // paddle
  ctx.fillStyle = '#ffffff'; ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
  // ball
  ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fillStyle='#fef08a'; ctx.fill(); ctx.closePath();
  // gifts
  for(const g of gifts){
    if(g.type==='life') ctx.fillStyle='#f87171';
    else if(g.type==='ice') ctx.fillStyle='#60a5fa';
    else if(g.type==='fire') ctx.fillStyle='#facc15';
    ctx.beginPath(); ctx.arc(g.x,g.y,g.size/2,0,Math.PI*2); ctx.fill();
  }
}

function checkCollisions(){
  if(ball.x+ball.vx>W-ball.r||ball.x+ball.vx<ball.r) ball.vx=-ball.vx;
  if(ball.y+ball.vy<ball.r) ball.vy=-ball.vy;
  if(ball.y+ball.r>=paddle.y && ball.x>=paddle.x && ball.x<=paddle.x+paddle.w){ ball.vy=-Math.abs(ball.vy); }
  if(ball.y+ball.vy>H){ lives--; updateUI(); resetBall(); if(lives<=0){ setTimeout(()=>{alert('Game Over'); resetGame();},50); }}
  // bricks & gifts
  for(let r=0;r<brickRows;r++){ for(let c=0;c<brickCols;c++){ const b=bricks[r][c]; if(b && b.alive){
    if(ball.x> b.x && ball.x< b.x+brickW && ball.y-ball.r < b.y+brickH && ball.y+ball.r > b.y){
      b.alive=false; ball.vy=-ball.vy; score++; updateUI(); spawnGift(b.x+brickW/2,b.y+brickH/2); checkLevelClear();
    }
  }}}
  // gifts catching
  for(let i=gifts.length-1;i>=0;i--){
    gifts[i].y += gifts[i].vy;
    if(gifts[i].y>=paddle.y && gifts[i].y<=paddle.y+paddle.h && gifts[i].x>=paddle.x && gifts[i].x<=paddle.x+paddle.w){
      if(gifts[i].type==='life'){ lives++; updateUI(); }
      else if(gifts[i].type==='ice'){ ball.vx*=0.7; ball.vy*=0.7; }
      else if(gifts[i].type==='fire'){ ball.vx*=1.3; ball.vy*=1.3; }
      gifts.splice(i,1);
    } else if(gifts[i].y>H) gifts.splice(i,1);
  }
}

function checkLevelClear(){
  for(let r=0;r<brickRows;r++) for(let c=0;c<brickCols;c++) if(bricks[r][c] && bricks[r][c].alive) return;
  leveling=true; showLevelOverlay(); popConfetti();
  setTimeout(()=>{ level++; brickRows=Math.min(6,brickRows+1); brickCols=Math.min(10,brickCols+1); ball.vx*=1.05; ball.vy=-Math.abs(ball.vy)*1.05; initBricks(); resetBall(); updateUI(); leveling=false; hideLevelOverlay(); },1500);
}

function showLevelOverlay(){ levelText.textContent=`Level ${level} Complete!`; levelOverlay.style.display='flex'; }
function hideLevelOverlay(){ levelOverlay.style.display='none'; }

function popConfetti(){ for(let i=0;i<60;i++){ const el=document.createElement('div'); el.className='confetti'; el.style.left=Math.random()*W+'px'; el.style.top='-20px'; el.style.background=`hsl(${Math.random()*360}deg 90% 60%)`; confettiLayer.appendChild(el); el.animate([{transform:`translateY(${H+50}px) rotate(${Math.random()*720}deg)`,opacity:1},{opacity:0}],{duration:1000+Math.random()*1200,easing:'cubic-bezier(.2,.8,.2,1)'}); setTimeout(()=>el.remove(),1600+Math.random()*1200); }}

function loop(){ if(!paused && !leveling){ ball.x+=ball.vx; ball.y+=ball.vy; checkCollisions(); } draw(); if(!paused) requestAnimationFrame(loop); }

function resetBall(){ ball.x=W/2; ball.y=H-80; ball.vx=4*(Math.random()>0.5?1:-1); ball.vy=-4; }
function resetGame(){ score=0;lives=5;level=1;brickRows=2;brickCols=6;initBricks();gifts=[];resetBall();updateUI();paused=false;leveling=false; }
function updateUI(){ scoreVal.textContent=score; livesVal.textContent=lives; levelVal.textContent=level; }

canvas.addEventListener('mousemove',(e)=>{ const rect=canvas.getBoundingClientRect(); paddle.x=Math.max(0,Math.min(W-paddle.w,e.clientX-rect.left-paddle.w/2)); });
pauseBtn.addEventListener('click',()=>{ paused=!paused; pauseBtn.textContent=paused?'Resume':'Pause'; if(!paused) requestAnimationFrame(loop); });
restartBtn.addEventListener('click',()=>{ resetGame(); });
window.addEventListener('resize',()=>{ W=canvas.width=Math.min(880,Math.max(420,window.innerWidth*0.9)); H=canvas.height=Math.round(W*520/880); paddle.y=H-46; resetBall(); initBricks(); updateUI(); draw(); });

initBricks();updateUI();requestAnimationFrame(loop);
</script>
</body>
</html>
